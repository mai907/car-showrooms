<div class="flex justify-center items-start min-h-screen bg-gray-100 pt-20 w-full">
    <form [formGroup]="formGroup" (ngSubmit)="onSubmit($event)"
          class="flex flex-col bg-white rounded-xl shadow-xl p-10 w-[28rem] border border-gray-200">
    
      <h2 class="text-2xl font-bold text-[#234C6A] mb-1">{{ type }}</h2>
      <p class="text-sm text-gray-500 mb-6">
        Fill the details below to {{ type }} showroom
      </p>
  
      @for(field of fields; track field; let id = $index){
        <!-- Label -->
        <label class="font-semibold text-sm mt-4 text-[#234C6A]" [for]="field.name">
          {{ field.label }}
        </label>
  
        <!-- Input or Select -->
        <ng-container [ngSwitch]="field.controlType">
          
          <!-- Input -->
          <input *ngSwitchCase="'input'"
          [type]="field.type || 'text'" 
          [formControlName]="field.name" 
          [placeholder]="field.placeholder || ''"
          class="h-12 px-4 rounded bg-gray-200 w-full focus:outline-none focus:ring-2 focus:ring-[#234C6A]" />

  
          <!-- Select -->
          <select *ngIf="field.controlType === 'select'"
          [formControlName]="field.name"
          [id]="field.name"
          class="flex items-center h-12 px-4 mt-2 rounded bg-gray-200 w-full
                 focus:outline-none focus:ring-2 focus:ring-[#234C6A]">
    <option value="">Select {{ field.label }}</option>
    <option *ngFor="let opt of field.options" [value]="opt.id">
      {{ opt.name }}
    </option>
  </select>
  
        </ng-container>
  
        <!-- Dynamic Error Messages -->
        <div *ngIf="(formGroup.get(field.name)?.touched || submitted) && formGroup.get(field.name)?.invalid"
             class="text-red-500 text-xs mt-1">
          <span *ngIf="formGroup.get(field.name)?.errors?.['required']">{{ field.label }} is required.</span>
          <span *ngIf="formGroup.get(field.name)?.errors?.['maxlength']">      {{ field.label }} cannot exceed 
            {{ formGroup.get(field.name)?.errors?.['maxlength'].requiredLength }} characters.</span>
          <span *ngIf="formGroup.get(field.name)?.errors?.['pattern']">
            <ng-container [ngSwitch]="field.name">
                <span *ngSwitchCase="'commercial_registration_number'">
                    Must be exactly 10 digits.
                  </span>
                  <span *ngSwitchCase="'contact_number'">
                    Must be numeric (max 15 digits).
                  </span>
                  <span *ngSwitchCase="'model_year'">
                    Must be a 4-digit year.
                  </span>
                  <span *ngSwitchCase="'price'">
                    Must be a valid number (e.g., 1000 or 1000.50).
                  </span>
                  <span *ngSwitchDefault>
                    Invalid format.
                  </span>
            </ng-container>
          </span>
        </div>
      }
  
      <!-- Submit button -->
      <div class="flex mt-8 justify-end">
        <button type="submit"
          [disabled]="formGroup.invalid"
          class="flex items-center justify-center h-12 rounded font-semibold text-base 
                 text-white bg-[#234C6A] hover:bg-[#1d3f59] focus:ring-2 focus:ring-[#234C6A] 
                 transition w-1/2 disabled:opacity-50">
          {{ type }}
        </button>
      </div>
    </form>
  </div>
  